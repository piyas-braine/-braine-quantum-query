"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[375],{1395(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"concepts/smart-models","title":"Smart Models","description":"Smart Models are our answer to \\"where do I put my business logic?\\".","source":"@site/docs/concepts/smart-models.md","sourceDirName":"concepts","slug":"/concepts/smart-models","permalink":"/-braine-quantum-query/docs/concepts/smart-models","draft":false,"unlisted":false,"editUrl":"https://github.com/piyas-braine/-braine-quantum-query/tree/main/website/docs/concepts/smart-models.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Signal Internals (O(1) Engine)","permalink":"/-braine-quantum-query/docs/concepts/signal-internals"},"next":{"title":"Infinite Queries","permalink":"/-braine-quantum-query/docs/guides/infinite-queries"}}');var s=t(4848),i=t(8453);const r={},d="Smart Models",l={},a=[{value:"The TodoModel Example",id:"the-todomodel-example",level:2},{value:"Consuming in React",id:"consuming-in-react",level:2}];function c(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"smart-models",children:"Smart Models"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Smart Models"}),' are our answer to "where do I put my business logic?".']}),"\n",(0,s.jsx)(n.p,{children:"They combine:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"State"})," (Reactive Signals)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Computed Properties"})," (Derived Signals)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Actions"})," (Methods)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"...into a single, testable, class-like entity."}),"\n",(0,s.jsx)(n.h2,{id:"the-todomodel-example",children:"The TodoModel Example"}),"\n",(0,s.jsxs)(n.p,{children:["Let's build a full featured Todo list logic in ",(0,s.jsx)(n.em,{children:"one"})," file."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { defineModel } from '@braine/quantum-query';\n\ninterface Todo {\n  id: string;\n  text: string;\n  done: boolean;\n}\n\nexport const TodoModel = defineModel({\n  // 1. Initial State\n  state: {\n    items: [] as Todo[],\n    filter: 'all' as 'all' | 'active' | 'completed',\n    isLoading: false\n  },\n\n  // 2. Computed (Auto-memoized)\n  computed: {\n    // Only re-runs if 'items' or 'filter' changes\n    visibleTodos() {\n      if (this.filter === 'all') return this.items;\n      if (this.filter === 'active') return this.items.filter(t => !t.done);\n      return this.items.filter(t => t.done);\n    },\n    \n    stats() {\n      const total = this.items.length;\n      const completed = this.items.filter(t => t.done).length;\n      return { total, completed, active: total - completed };\n    }\n  },\n\n  // 3. Actions\n  actions: {\n    add(text: string) {\n      this.items.push({ \n        id: crypto.randomUUID(), \n        text, \n        done: false \n      });\n    },\n    \n    toggle(id: string) {\n      const todo = this.items.find(t => t.id === id);\n      if (todo) todo.done = !todo.done;\n    },\n    \n    async loadFromServer() {\n      this.isLoading = true;\n      const data = await fetch('/api/todos').then(r => r.json());\n      this.items = data; // Batch update\n      this.isLoading = false;\n    }\n  }\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"consuming-in-react",children:"Consuming in React"}),"\n",(0,s.jsx)(n.p,{children:"Use the `useStore` hook to bind to the model."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useStore } from '@braine/quantum-query';\nimport { TodoModel } from './models/todos';\n\nfunction TodoApp() {\n  // Subscribes ONLY to accessed properties (visibleTodos, stats)\n  const store = useStore(TodoModel);\n\n  return (\n    <div>\n      <h1>Todos ({store.stats.active} left)</h1>\n      \n      <ul>\n        {store.visibleTodos.map(todo => (\n          <li key={todo.id} onClick={() => store.toggle(todo.id)}>\n             {todo.text} {todo.done ? '\u2705' : ''}\n          </li>\n        ))}\n      </ul>\n\n      <button onClick={() => store.loadFromServer()}>\n        {store.isLoading ? 'Loading...' : 'Refresh'}\n      </button>\n    </div>\n  );\n}\n"})})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>r,x:()=>d});var o=t(6540);const s={},i=o.createContext(s);function r(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);