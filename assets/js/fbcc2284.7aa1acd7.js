"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[513],{581(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"concepts/mental-model","title":"Mental Model","description":"Most apps suffer from \\"State Schizophrenia\\". They split logic between:","source":"@site/docs/concepts/mental-model.md","sourceDirName":"concepts","slug":"/concepts/mental-model","permalink":"/-braine-quantum-query/docs/concepts/mental-model","draft":false,"unlisted":false,"editUrl":"https://github.com/piyas-braine/-braine-quantum-query/tree/main/website/docs/concepts/mental-model.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","next":{"title":"Signal Internals (O(1) Engine)","permalink":"/-braine-quantum-query/docs/concepts/signal-internals"}}');var r=t(4848),i=t(8453);const l={},c="Mental Model",a={},o=[{value:"Architecture Purity",id:"architecture-purity",level:2},{value:"The Two Types of State",id:"the-two-types-of-state",level:2},{value:"1. Server State (Async)",id:"1-server-state-async",level:3},{value:"2. App State (Sync)",id:"2-app-state-sync",level:3},{value:"The Bridge \ud83c\udf09",id:"the-bridge-",level:2},{value:"Scenario: The Filterable List",id:"scenario-the-filterable-list",level:3},{value:"Smart Models (Advanced)",id:"smart-models-advanced",level:2}];function d(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"mental-model",children:"Mental Model"})}),"\n",(0,r.jsx)(n.p,{children:'Most apps suffer from "State Schizophrenia". They split logic between:'}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Redux/Zustand"})," (Client State)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"React Query"})," (Server State)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:'These two worlds rarely talk. You end up with synchronization bugs ("Why is my modal open if the user logout failed?").'}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Quantum Query"})," unifies them through a ",(0,r.jsx)(n.strong,{children:"Clean Architecture"})," that decouples where data is stored from how it's fetched."]}),"\n",(0,r.jsx)(n.h2,{id:"architecture-purity",children:"Architecture Purity"}),"\n",(0,r.jsx)(n.p,{children:"The library is split into three distinct layers:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Remote Layer"}),": Handles deduplicating identical network requests and automatic retries."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Storage Layer"}),": A high-performance LRU cache that manages data expiration and Signal lifecycle."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Facade Layer"}),": The ",(0,r.jsx)(n.code,{children:"QueryClient"})," provides a unified API to orchestrate these layers."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"the-two-types-of-state",children:"The Two Types of State"}),"\n",(0,r.jsx)(n.h3,{id:"1-server-state-async",children:"1. Server State (Async)"}),"\n",(0,r.jsxs)(n.p,{children:["Data you ",(0,r.jsx)(n.em,{children:"borrow"})," from the server."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Source of Truth"}),": The Database."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Characteristics"}),": Stale, needs caching, subject to race conditions."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tool"}),": ",(0,r.jsx)(n.code,{children:"useQuery"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-app-state-sync",children:"2. App State (Sync)"}),"\n",(0,r.jsxs)(n.p,{children:["Data you ",(0,r.jsx)(n.em,{children:"own"})," on the client."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Source of Truth"}),": The User's actions (right now)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Characteristics"}),": Instant, temporary, synchronous."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tool"}),": ",(0,r.jsx)(n.code,{children:"createState"})," / ",(0,r.jsx)(n.code,{children:"useStore"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"the-bridge-",children:"The Bridge \ud83c\udf09"}),"\n",(0,r.jsxs)(n.p,{children:["This is where we shine. You can drive queries ",(0,r.jsx)(n.em,{children:"from"})," your store, and sync query results ",(0,r.jsx)(n.em,{children:"into"})," your store."]}),"\n",(0,r.jsx)(n.h3,{id:"scenario-the-filterable-list",children:"Scenario: The Filterable List"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The Old Way"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Component A holds Filter State (React ",(0,r.jsx)(n.code,{children:"useState"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"Component B needs Filter State -> Prop Drill 10 levels down."}),"\n",(0,r.jsxs)(n.li,{children:["Component C fetches data -> Wraps ",(0,r.jsx)(n.code,{children:"useQuery"})," in ",(0,r.jsx)(n.code,{children:"useEffect"})," to listen to props."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The Quantum Way"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Create a Store"})," for the UI logic.","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const filters = createState({ status: 'active', search: '' });\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bind Query to Store"})," (Auto-dependency tracking).","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const { data } = useQuery(['items', filters.status], fetchItems);\n"})}),"\n",(0,r.jsxs)(n.em,{children:["When ",(0,r.jsx)(n.code,{children:"filters.status"})," changes, the query re-runs automatically."]})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"smart-models-advanced",children:"Smart Models (Advanced)"}),"\n",(0,r.jsxs)(n.p,{children:["For complex domain logic, use ",(0,r.jsx)(n.strong,{children:"Smart Models"}),'. This gives you a "Class-like" structure that is 100% reactive.']}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export const TodoModel = defineModel({\n  state: { items: [], loading: false },\n  \n  // Computed (Signal-based memoization)\n  computed: {\n    count() { return this.items.length }\n  },\n\n  // Actions (Async aware)\n  actions: {\n    async add(text) {\n      this.state.loading = true; // Updates UI instantly\n      await api.post('/todos', { text });\n      this.state.loading = false;\n    }\n  }\n});\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>l,x:()=>c});var s=t(6540);const r={},i=s.createContext(r);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);